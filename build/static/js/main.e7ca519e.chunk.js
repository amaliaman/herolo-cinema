(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{127:function(e){e.exports=["Starship Troopers 2: Hero of the Federation","Hero","Local Hero","Bilal: A New Breed of Hero","Almost Heroes","Ten Inch Hero","Nayak: The Real Hero","My Father the Hero","Imaginary Heroes","Age of Heroes"]},129:function(e,t,r){e.exports=r.p+"static/media/loader.546bb2e7.svg"},132:function(e,t,r){e.exports=r(300)},298:function(e,t,r){},300:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),i=r(18),o=r(24),c=r(14),l=r(125),s=(r(141),r(131)),u=r(10),m=r(126),d=r.n(m),p={ADD:"ADD",EDIT:"EDIT"},E="There are no movies here. Start by clicking the '".concat("Add Movie","' button!"),f="secondary",h="info",b="danger",v="Required",O="Please enter a valid year",g={movies:{isFetching:!1,items:[],selectedId:"",selectedTitle:""},form:{isOpen:!1,mode:p.ADD},deleteConfirmation:{isOpen:!1},errorMessage:""},y=Object(o.c)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.movies,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MOVIE":var r=Object(u.a)({},t.movie,{id:d()()});return Object(u.a)({},e,{items:Object(s.a)(e.items).concat([r])});case"DELETE_MOVIE":return Object(u.a)({},e,{selectedId:"",selectedTitle:"",items:e.items.filter(function(e){return e.id!==t.id})});case"SELECT_FOR_EDIT":return Object(u.a)({},e,{selectedId:t.id});case"TOGGLE_DELETE_CONFIRM":return t.id?Object(u.a)({},e,{selectedId:t.id,selectedTitle:e.items.find(function(e){return e.id===t.id}).title}):e;case"UPDATE_MOVIE":return Object(u.a)({},e,{selectedId:"",items:e.items.map(function(e){return e.id===t.id?Object(u.a)({},e,t.movie):e})});case"REQUEST_MOVIES":return Object(u.a)({},e,{isFetching:!0});case"RECEIVE_MOVIES":return Object(u.a)({},e,{items:t.movies,isFetching:!1});default:return e}},form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.form,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_FORM":return Object(u.a)({},e,{isOpen:!0,mode:t.mode});case"TOGGLE_FORM":return Object(u.a)({},e,{isOpen:!e.isOpen});default:return e}},deleteConfirmation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.deleteConfirmation;switch((arguments.length>1?arguments[1]:void 0).type){case"TOGGLE_DELETE_CONFIRM":return Object(u.a)({},e,{isOpen:!e.isOpen});default:return e}},errorMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.errorMessage,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_ERROR":return t.message;case"RESET_ERROR":return g.errorMessage;default:return e}}}),j=r(32),M=r.n(j),T=r(49),D=r(127),I=r(4),C=r(38),k=r.n(C),w=new function e(){Object(I.a)(this,e),this.queryApi=function(){var e=Object(T.a)(M.a.mark(function e(t,r,n){var a;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t,e.next="get"===e.t0?4:"post"===e.t0?8:"put"===e.t0?12:"delete"===e.t0?16:20;break;case 4:return e.next=6,k.a.get(r);case 6:return a=e.sent,e.abrupt("break",21);case 8:return e.next=10,k.a.post(r,n);case 10:return a=e.sent,e.abrupt("break",21);case 12:return e.next=14,k.a.put(r,n);case 14:return a=e.sent,e.abrupt("break",21);case 16:return e.next=18,k.a.delete(r);case 18:return a=e.sent,e.abrupt("break",21);case 20:throw new Error("Unexpected method: ".concat(t));case 21:return e.abrupt("return",a.data);case 24:throw e.prev=24,e.t1=e.catch(0),e.t1;case 27:case"end":return e.stop()}},e,this,[[0,24]])}));return function(t,r,n){return e.apply(this,arguments)}}(),this.MOVIES_PATH="/movies"},F=new function e(){Object(I.a)(this,e),this.getMovies=function(e){var t="".concat(w.MOVIES_PATH);return w.queryApi("post",t,{titles:e})}},_=function(e){return{type:"RECEIVE_MOVIES",movies:e}},R=function(e){return function(t,r){t(S()),t(function(e){return{type:"SHOW_FORM",mode:e}}(e))}},x=function(){return function(e,t){e(S()),e({type:"TOGGLE_FORM"})}},A=function(e){return{type:"TOGGLE_DELETE_CONFIRM",id:e}},N=function(e){return{type:"SHOW_ERROR",message:e}},S=function(){return{type:"RESET_ERROR"}},L=r(6),H=r(8),V=r(7),q=r(9),G=r(3),U=function(e){function t(){var e,r;Object(I.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(H.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(a)))).handleEditClick=function(){var e=r.props,t=e.selectForEdit,n=e.showForm;t(e.movie.id),n(p.EDIT)},r}return Object(q.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this,t=this.props.movie,r=t.id,n=t.title,i=t.year,o=t.runtime,c=t.genre,l=t.director;return a.a.createElement(G.c,null,a.a.createElement(G.d,null,a.a.createElement(G.j,null,n),a.a.createElement(G.h,null,i),a.a.createElement(G.i,null,"Director: ",l,a.a.createElement("br",null),"Genre: ",c,a.a.createElement("br",null),"Runtime: ",o)),a.a.createElement(G.f,null,a.a.createElement(G.g,{href:"#",onClick:this.handleEditClick},"Edit"),a.a.createElement(G.g,{href:"#",onClick:function(){return e.props.toggleDeleteConfirm(r)}},"Delete")))}}]),t}(n.Component),P=function(e){var t=e.color,r=e.message;return a.a.createElement(G.a,{color:t,className:"alert-message"},r)},B=function(e){function t(){return Object(I.a)(this,t),Object(H.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this;return this.props.movies.length?a.a.createElement(G.e,null,this.props.movies.map(function(t){return a.a.createElement(U,{key:t.id,movie:t,toggleDeleteConfirm:e.props.toggleDeleteConfirm,selectForEdit:e.props.selectForEdit,showForm:e.props.showForm})})):a.a.createElement(P,{message:E,color:h})}}]),t}(n.Component),W=r(129),J=r.n(W),Q=function(){return a.a.createElement("div",{className:"loader"},a.a.createElement("img",{alt:"loader",src:J.a}))},Y=function(e){function t(){var e,r;Object(I.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(H.a)(this,(e=Object(V.a)(t)).call.apply(e,[this].concat(a)))).handleDelete=function(){r.props.deleteMovie(r.props.selectedId),r.props.toggle()},r}return Object(q.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isOpen,r=e.toggle,n=e.selectedTitle;return a.a.createElement(G.n,{isOpen:t,toggle:function(){return r()}},a.a.createElement(G.p,{toggle:function(){return r()}},n),a.a.createElement(G.o,null,"Are you sure you want to delete this movie?",a.a.createElement(G.q,{form:!0},a.a.createElement(G.b,{color:h,type:"button",onClick:this.handleDelete},"Delete"),a.a.createElement(G.b,{outline:!0,color:f,type:"button",onClick:function(){return r()}},"Cancel"))))}}]),t}(n.Component),z=function(e){function t(){return Object(I.a)(this,t),Object(H.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){return a.a.createElement(Y,{isOpen:this.props.isOpen,toggle:this.props.toggleDeleteConfirm,selectedId:this.props.selectedId,deleteMovie:this.props.deleteMovie,selectedTitle:this.props.selectedTitle})}}]),t}(n.Component),K={toggleDeleteConfirm:A,deleteMovie:function(e){return{type:"DELETE_MOVIE",id:e}}},X=Object(c.b)(function(e){var t=e.deleteConfirmation,r=e.movies,n=r.selectedId,a=r.selectedTitle;return{isOpen:t.isOpen,selectedId:n,selectedTitle:a}},K)(z),Z=function(e){function t(){return Object(I.a)(this,t),Object(H.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){return this.props.isFetching?a.a.createElement(Q,null):a.a.createElement("div",null,a.a.createElement(X,null),a.a.createElement(B,{movies:this.props.movies,toggleDeleteConfirm:this.props.toggleDeleteConfirm,selectForEdit:this.props.selectForEdit,showForm:this.props.showForm}))}}]),t}(n.Component),$={toggleDeleteConfirm:A,selectForEdit:function(e){return{type:"SELECT_FOR_EDIT",id:e}},showForm:R},ee=Object(c.b)(function(e){var t=e.movies;return{movies:t.items,isFetching:t.isFetching}},$)(Z),te=r(19),re=r(25),ne=re.object().shape({title:re.string().required(v),year:re.number().required(v).min(1800,O).max(9999,O).integer(),director:re.string().required(v),genre:re.string().required(v),runtime:re.string().required(v)}),ae=function(e){var t=e.movieToEdit,r=e.updateMovie,n=e.addMovie,i=e.toggle,o=e.buttonLabel,c=e.errorMessage;return a.a.createElement(te.c,{initialValues:{title:t?t.title:"",year:t?t.year:"",director:t?t.director:"",genre:t?t.genre:"",runtime:t?t.runtime:""},validationSchema:ne,onSubmit:function(e){t?r(e,t.id):n(e)}},function(e){var t=e.errors;return e.touched,a.a.createElement(te.b,null,a.a.createElement(G.l,null,a.a.createElement(G.m,{for:"title"},"Title"),a.a.createElement(te.a,{name:"title",id:"title",placeholder:"Title",className:"form-control",type:"text"}),t.title&&a.a.createElement("div",{className:"validation-error"},t.title)),a.a.createElement(G.l,null,a.a.createElement(G.m,{for:"year"},"Year"),a.a.createElement(te.a,{name:"year",id:"year",placeholder:"Year",className:"form-control",type:"number"}),t.year&&a.a.createElement("div",{className:"validation-error"},t.year)),a.a.createElement(G.l,null,a.a.createElement(G.m,{for:"director"},"Director"),a.a.createElement(te.a,{name:"director",id:"director",placeholder:"Director",className:"form-control",type:"text"}),t.director&&a.a.createElement("div",{className:"validation-error"},t.director)),a.a.createElement(G.l,null,a.a.createElement(G.m,{for:"genre"},"Genre"),a.a.createElement(te.a,{name:"genre",id:"genre",placeholder:"Genre",className:"form-control",type:"text"}),t.genre&&a.a.createElement("div",{className:"validation-error"},t.genre)),a.a.createElement(G.l,null,a.a.createElement(G.m,{for:"runtime"},"Runtime"),a.a.createElement(te.a,{name:"runtime",id:"runtime",placeholder:"Runtime",className:"form-control",type:"text"}),t.runtime&&a.a.createElement("div",{className:"validation-error"},t.runtime)),a.a.createElement(G.b,{color:h,type:"submit"},o),a.a.createElement(G.b,{outline:!0,color:f,type:"button",onClick:i},"Cancel"),c&&a.a.createElement(G.q,{form:!0},a.a.createElement(P,{message:c,color:b})))})},ie=function(e){function t(){return Object(I.a)(this,t),Object(H.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isOpen,r=e.toggle,n=e.title,i=e.submitAction,o=e.addMovie,c=e.updateMovie,l=e.movieToEdit,s=e.buttonLabel,u=e.errorMessage;return a.a.createElement(G.n,{isOpen:t,toggle:r},a.a.createElement(G.p,{toggle:r},n),a.a.createElement(G.o,null,a.a.createElement(ae,{submitAction:i,toggle:r,addMovie:o,updateMovie:c,movieToEdit:l,buttonLabel:s,errorMessage:u})))}}]),t}(n.Component),oe=function(e){function t(){return Object(I.a)(this,t),Object(H.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){return a.a.createElement(ie,{isOpen:this.props.isOpen,title:this.props.title,toggle:this.props.toggleForm,updateMovie:this.props.updateMovie,addMovie:this.props.addMovie,movieToEdit:this.props.movieToEdit,buttonLabel:this.props.buttonLabel,errorMessage:this.props.errorMessage})}}]),t}(n.Component),ce={toggleForm:x,updateMovie:function(e,t){return function(r,n){var a=n().movies;r(S()),-1===a.items.filter(function(e){return e.id!==a.selectedId}).findIndex(function(t){return t.title===e.title})?(r(function(e,t){return{type:"UPDATE_MOVIE",movie:e,id:t}}(e,t)),r(x())):r(N("".concat("Title already exists",": ").concat(e.title)))}},addMovie:function(e){return function(t,r){var n=r().movies;t(S()),-1===n.items.findIndex(function(t){return t.title===e.title})?(t(function(e){return{type:"ADD_MOVIE",movie:e}}(e)),t(x())):t(N("".concat("Title already exists",": ").concat(e.title)))}}},le=Object(c.b)(function(e){var t=e.form,r=e.movies,n=r.items,a=r.selectedId,i=e.errorMessage,o={isOpen:t.isOpen,errorMessage:i};return t.mode===p.EDIT?(o.title="Edit Movie",o.buttonLabel="Update",o.movieToEdit=n.find(function(e){return e.id===a})):(o.title="Add Movie",o.buttonLabel="Submit"),o},ce)(oe),se=function(e){function t(){return Object(I.a)(this,t),Object(H.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement(G.k,null,a.a.createElement(G.q,null,a.a.createElement("h1",{className:"display-4"},a.a.createElement("span",{role:"img","aria-label":"cinema"},"\ud83c\udfac")," ","Herolo Cinema")),a.a.createElement(G.q,null,a.a.createElement(G.b,{color:h,onClick:function(){return e.props.showForm(p.ADD)}},"Add Movie")),a.a.createElement(G.q,null,a.a.createElement(ee,null),a.a.createElement(le,null)),a.a.createElement(G.q,{className:"footer"},a.a.createElement("div",{className:"text-center"},a.a.createElement("p",null,a.a.createElement("a",{href:"https://github.com/amaliaman/herolo-cinema",target:"_blank",rel:"noopener noreferrer"},"GitHub")),a.a.createElement("small",{className:"text-muted"},"Background image ",a.a.createElement("a",{href:"https://www.freepik.com/free-photo/creative-arrangement-of-popcorn-and-clapper_2303387.htm",target:"_blank",rel:"noopener noreferrer"},"Designed by Freepik")))))}}]),t}(n.Component),ue={showForm:R},me=Object(c.b)(null,ue)(se),de=function(e){function t(){return Object(I.a)(this,t),Object(H.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(L.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(me,null))}}]),t}(n.Component),pe=(r(296),r(298),[l.a]);var Ee=Object(o.d)(y,o.a.apply(void 0,pe));Ee.dispatch(function(){var e=Object(T.a)(M.a.mark(function e(t){var r;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUEST_MOVIES"}),e.next=3,F.getMovies(D);case 3:return r=e.sent,e.abrupt("return",t(_(r)));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),Object(i.render)(a.a.createElement(c.a,{store:Ee},a.a.createElement(de,null)),document.getElementById("root"))}},[[132,2,1]]]);
//# sourceMappingURL=main.e7ca519e.chunk.js.map